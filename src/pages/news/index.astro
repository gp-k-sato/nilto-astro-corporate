---
import Layout from "../../layouts/Layout.astro";
import SectionHeading from "../../components/SectionHeading.astro";
import NewsCard from "../../components/NewsCard.astro";
import { fetchNews } from "../../lib/nilto.js";

let news: any[] = [];

try {
  news = await fetchNews();
} catch (e) {
  console.error("ニュース取得エラー:", e);
}
---

<Layout title="ニュース | NILTO Demo" description="株式会社NILTO Demoからのお知らせ一覧です。">
  <section class="l-main__section">
    <div class="l-main__section-inner">
      <SectionHeading ja="ニュース" en="News" />
      {news && news.length > 0 ? (
        <div class="p-news__list">
          {news.map((item: any) => (
            <NewsCard content={item} />
          ))}
        </div>
      ) : (
        <p>ニュースはまだありません。</p>
      )}
    </div>
  </section>
</Layout>
